var rpnapp=function(){var n;var a;var t;var e;var o;var i;var r={en:{beforeUnloadMsg:"Data not saved. Are-you sure you want to quit?"},fr:{beforeUnloadMsg:"Données non sauvegardées. Êtes-vous sûr de vouloir quitter?"}};var d=function(e){if(e==null||_.isUndefined(e)){e={}}_.defaults(e,{location:$("body"),binded:function(){},addCustomBinding:function(n){},customMapping:{},model:"model.json",modelKeyAttribute:"Id",track:true,language:"en",debug:false});n=e;t=r[n.language];if(n.track){$(window).on("beforeunload",function(){if(a.tracker().somethingHasChanged()){return t.beforeUnloadMsg}})}l();g("rpnapp successfully initied")};var l=function(){if(typeof n.model==="object"){u(n.model)}else if(typeof n.model==="string"){try{n.model=JSON.parse(n.model)}catch(a){$.getJSON(n.model,function(n){u(n)}).fail(function(){g("Error getting model from url "+n.model)})}}};var s=function(){return ko.mapping.toJS(a)};var u=function(t){a=ko.mapping.fromJS(t,n.customMapping);n.addCustomBinding(a);if(n.track){a.tracker=new m(a)}ko.applyBindings(a);n.binded();g("model loaded successfully and binded to ui")};var c=function(n){a=ko.mapping.fromJS(n,a)};var f=function(){return a};var m=function(n,a){a=a||ko.toJSON;var t=ko.observable(a(n));var e={somethingHasChanged:ko.dependentObservable(function(){return a(n)!=t()}),markCurrentStateAsClean:function(){t(a(n))}};return function(){return e}};var v=function(){if(n.track){return a.tracker().somethingHasChanged()}return false};var p=function(){if(n.track){return a.tracker().markCurrentStateAsClean()}return false};var g=function(a){if(n.debug){console.log(a)}};var b=function(n,a){if(n==null||_.isUndefined(n)){n={}}_.defaults(n,{title:"Title",content:"<p>Content</p>",validationBtn:{layout:"danger",label:'<span class="glyphicon glyphicon-ok"></span> Validate'}});$("#rpnappmodal").remove();var t=$('<div class="modal" id="rpnappmodal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">'+n.title+'</h4></div><div class="modal-body">'+n.content+'</div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Annuler</button></div></div></div></div>');var e=$('<button type="button" class="btn btn-'+n.validationBtn.layout+'">'+n.validationBtn.label+"</button>");$(".modal-footer",t).append(e);$("body").append(t);e.click(function(){t.modal("hide");a()});t.modal()};return{getViewModel:f,rebindModel:c,launchModal:b,getModel:s,markModelAsClean:p,isDirty:v,log:g,init:d}}();
//# sourceMappingURL=rpnapp.0.0.2.min.js.map