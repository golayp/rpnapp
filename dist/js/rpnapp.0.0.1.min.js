var rpnapp=function(){var n;var a;var e;var t;var o;var r;var d={en:{beforeUnloadMsg:"Data not saved. Are-you sure you want to quit?",save:"Save",drop:"Delete",back:"Back"},fr:{beforeUnloadMsg:"Données non sauvegardées. Êtes-vous sûr de vouloir quitter?",save:"Sauvegarder",drop:"Supprimer",back:"Retour"}};var i=function(t){if(t==null||_.isUndefined(t)){t={}}_.defaults(t,{location:$("body"),binded:function(){},addCustomBinding:function(n){},model:"model.json",modelKeyAttribute:"Id",track:true,addToolbar:true,language:"en",debug:false});n=t;e=d[n.language];if(n.track){$(window).on("beforeunload",function(){if(a.tracker().somethingHasChanged()){return e.beforeUnloadMsg}})}l();p("rpnapp successfully initied")};var l=function(){if(typeof n.model==="object"){u(n.model)}else if(typeof n.model==="string"){try{n.model=JSON.parse(n.model)}catch(a){$.getJSON(n.model,function(n){u(n)}).fail(function(){p("Error getting model from url "+n.model)})}}};var s=function(){return ko.mapping.toJS(a)};var u=function(e){a=ko.mapping.fromJS(e);n.addCustomBinding(a);if(n.track){a.tracker=new f(a)}ko.applyBindings(a);n.binded();p("model loaded successfully and binded to ui")};var c=function(n){a=ko.mapping.fromJS(n,a)};var f=function(n,a){a=a||ko.toJSON;var e=ko.observable(a(n));var t={somethingHasChanged:ko.dependentObservable(function(){return a(n)!=e()}),markCurrentStateAsClean:function(){e(a(n))}};return function(){return t}};var v=function(){if(n.track){return a.tracker().somethingHasChanged()}return false};var m=function(){if(n.track){return a.tracker().markCurrentStateAsClean()}return false};var p=function(a){if(n.debug){console.log(a)}};var b=function(n,a){if(n==null||_.isUndefined(n)){n={}}_.defaults(n,{title:"Title",content:"<p>Content</p>",validationBtn:{layout:"danger",label:'<span class="glyphicon glyphicon-ok"></span> Validate'}});$("#rpnappmodal").remove();var e=$('<div class="modal" id="rpnappmodal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">'+n.title+'</h4></div><div class="modal-body">'+n.content+'</div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Annuler</button></div></div></div></div>');var t=$('<button type="button" class="btn btn-'+n.validationBtn.layout+'">'+n.validationBtn.label+"</button>");$(".modal-footer",e).append(t);$("body").append(e);t.click(function(){e.modal("hide");a()});e.modal()};return{rebindModel:c,launchModal:b,getModel:s,markModelAsClean:m,isDirty:v,log:p,init:i}}();
//# sourceMappingURL=rpnapp.0.0.1.min.js.map